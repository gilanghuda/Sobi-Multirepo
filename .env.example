# ╔════════════════════════════════════════════════════════════════════════════╗
# ║                  SoBi Application - Environment Configuration              ║
# ║                         Multi-Platform Development                          ║
# ║        Konfigurasi Lingkungan Terintegrasi untuk Seluruh Ekosistem        ║
# ╚════════════════════════════════════════════════════════════════════════════╝

# INSTRUKSI:
# 1. COPY file ini ke .env di root directory
# 2. JANGAN PERNAH commit .env ke repository
# 3. CUSTOMIZE values sesuai environment lokal Anda
# 4. Untuk development, gunakan localhost URLs
# 5. Untuk production, gunakan domain yang sudah configured

# ═══════════════════════════════════════════════════════════════════════════════
# 🗄️  DATABASE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

DB_HOST=148.230.101.108
DB_PORT=5432
DB_USER=etmin
DB_PASSWORD=etmin
DB_NAME=sobi-db
DB_SSLMODE=disable
DB_SCHEMA=public
DB_MAX_CONNECTIONS=25
DB_MIN_IDLE_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=10
DB_STATEMENT_TIMEOUT=30

# Database Pool Configuration
DB_POOL_MAX_SIZE=20
DB_POOL_MIN_SIZE=5
DB_POOL_CONNECTION_TIMEOUT=30
DB_POOL_IDLE_TIMEOUT=600

# ═══════════════════════════════════════════════════════════════════════════════
# 🖥️  BACKEND SERVER CONFIGURATION (Go Fiber)
# ═══════════════════════════════════════════════════════════════════════════════

SERVER_HOST=0.0.0.0
SERVER_PORT=8000
SERVER_ENV=development
SERVER_READ_TIMEOUT=15
SERVER_WRITE_TIMEOUT=15
SERVER_IDLE_TIMEOUT=60
SERVER_MAX_REQUEST_SIZE=52428800

# ═══════════════════════════════════════════════════════════════════════════════
# 🔑  JWT AUTHENTICATION CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

JWT_SECRET=your-super-secret-jwt-key-min-32-chars-change-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_MINUTES=1440
REFRESH_TOKEN_HOURS=720
JWT_ISSUER=sobi-app
JWT_AUDIENCE=sobi-users

# ═══════════════════════════════════════════════════════════════════════════════
# 📧 SMTP/EMAIL CONFIGURATION (Gmail)
# ═══════════════════════════════════════════════════════════════════════════════

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=YOUR_EMAIL@gmail.com
SMTP_PASSWORD=YOUR_GMAIL_APP_PASSWORD
SMTP_FROM=YOUR_EMAIL@gmail.com
SMTP_FROM_NAME=SoBi Support
SMTP_TIMEOUT=10
SMTP_TLS_ENABLED=true

# Email Configuration
MAIL_VERIFICATION_ENABLED=true
MAIL_NOTIFICATION_ENABLED=true
MAIL_TEMPLATE_PATH=./templates/emails

# ═══════════════════════════════════════════════════════════════════════════════
# 💳 PAYMENT GATEWAY CONFIGURATION (Midtrans)
# ═══════════════════════════════════════════════════════════════════════════════

MIDTRANS_ENVIRONMENT=sandbox
MIDTRANS_SERVER_KEY=YOUR_MIDTRANS_SERVER_KEY
MIDTRANS_CLIENT_KEY=YOUR_MIDTRANS_CLIENT_KEY
MIDTRANS_MERCHANT_ID=YOUR_MIDTRANS_MERCHANT_ID
MIDTRANS_API_BASE_URL=https://api.sandbox.midtrans.com
MIDTRANS_SNAP_BASE_URL=https://snap.sandbox.midtrans.com
MIDTRANS_WEBHOOK_URL=https://sobi.gilanghuda.my.id/webhook/midtrans
MIDTRANS_WEBHOOK_SECRET=your-webhook-secret-key

# Payment Configuration
PAYMENT_TIMEOUT=900
PAYMENT_NOTIFICATION_ENABLED=true

# ═══════════════════════════════════════════════════════════════════════════════
# 🤖 GOOGLE AI & GEMINI API CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

GEMINI_API_KEY=YOUR_GEMINI_API_KEY
GEMINI_API_URL=https://generativelanguage.googleapis.com/v1beta/models
GEMINI_MODEL=gemini-2.0-flash
GEMINI_MODEL_VISION=gemini-pro-vision
GEMINI_TEMPERATURE=0.7
GEMINI_MAX_TOKENS=2048
GEMINI_TOP_P=0.95
GEMINI_TOP_K=40

# ═══════════════════════════════════════════════════════════════════════════════
# 🔐 GOOGLE OAuth 2.0 CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

OAUTH_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID
OAUTH_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET
OAUTH_REDIRECT_URI=http://localhost:8000/auth/google/callback
OAUTH_SCOPE=openid profile email
OAUTH_TOKEN_ENDPOINT=https://oauth2.googleapis.com/token
OAUTH_USERINFO_ENDPOINT=https://www.googleapis.com/oauth2/v1/userinfo

# ═══════════════════════════════════════════════════════════════════════════════
# 🤖 RAG/AI SERVICE CONFIGURATION (Python FastAPI)
# ═══════════════════════════════════════════════════════════════════════════════

RAG_SERVICE_URL=http://localhost:8001
RAG_SERVICE_TIMEOUT=30
RAG_SERVICE_ENABLE=true

# RAG Model Configuration
RAG_EMBEDDINGS_MODEL=all-MiniLM-L6-v2
RAG_BM25_WEIGHT=0.5
RAG_SEMANTIC_WEIGHT=0.5
RAG_TOP_K_RESULTS=5
RAG_SIMILARITY_THRESHOLD=0.3

# ═══════════════════════════════════════════════════════════════════════════════
# 🌐 CORS CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

ALLOWED_ORIGINS=http://localhost:3001,http://localhost:3002,http://localhost:3003,http://localhost:8081,https://sobi.gilanghuda.my.id
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key
ALLOWED_CREDENTIALS=true
MAX_AGE=3600

# ═══════════════════════════════════════════════════════════════════════════════
# 📝 LOGGING CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=./logs/sobi.log
LOG_MAX_SIZE=10m
LOG_MAX_BACKUPS=5
LOG_MAX_AGE=30
LOG_COMPRESS=true

# ═══════════════════════════════════════════════════════════════════════════════
# 🚀 CACHE/REDIS CONFIGURATION (Optional)
# ═══════════════════════════════════════════════════════════════════════════════

REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_CACHE_TTL=3600
REDIS_POOL_SIZE=10

# ═══════════════════════════════════════════════════════════════════════════════
# 📤 FILE UPLOAD CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

MAX_UPLOAD_SIZE=52428800
UPLOAD_DIR=./uploads
UPLOAD_TEMP_DIR=./uploads/temp
ALLOWED_EXTENSIONS=pdf,doc,docx,jpg,jpeg,png,gif,webp,mp4,webm,mp3,wav
UPLOAD_VIRUS_SCAN=false

# ═══════════════════════════════════════════════════════════════════════════════
# 🔔 NOTIFICATION CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

NOTIFICATION_ENABLED=true
PUSH_NOTIFICATION_ENABLED=true
EMAIL_NOTIFICATION_ENABLED=true
SMS_NOTIFICATION_ENABLED=false
NOTIFICATION_QUEUE=redis

# ═══════════════════════════════════════════════════════════════════════════════
# 🌍 APPLICATION URLS & DOMAINS
# ═══════════════════════════════════════════════════════════════════════════════

APP_NAME=SoBi
APP_VERSION=1.0.0
APP_URL=https://sobi.gilanghuda.my.id
API_URL=https://api.sobi.gilanghuda.my.id
FRONTEND_URL=https://sobi.gilanghuda.my.id

# ═══════════════════════════════════════════════════════════════════════════════
# 🖼️  FRONTEND CONFIGURATION (Flutter)
# ═══════════════════════════════════════════════════════════════════════════════

# API Configuration
API_BASE_URL=http://localhost:8000
API_TIMEOUT=30
API_RETRY_ATTEMPTS=3
API_RETRY_DELAY=1000

# Auth Configuration
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID
GOOGLE_IOS_CLIENT_ID=YOUR_GOOGLE_IOS_CLIENT_ID
GOOGLE_ANDROID_CLIENT_ID=YOUR_GOOGLE_ANDROID_CLIENT_ID
GOOGLE_WEB_CLIENT_ID=YOUR_GOOGLE_WEB_CLIENT_ID

# App Configuration
APP_ENV=development
DEBUG_MODE=true

# Feature Flags
ENABLE_OFFLINE_MODE=true
ENABLE_ANALYTICS=false
ENABLE_CRASH_REPORTING=false
ENABLE_PERFORMANCE_MONITORING=false

# Deep Linking
DEEP_LINK_SCHEMA=sobi://
DEEP_LINK_HOST=app.sobi.local

# Firebase Configuration (Optional)
FCM_PROJECT_ID=your-firebase-project-id
FCM_API_KEY=your-firebase-api-key
FCM_APP_ID=your-firebase-app-id
FCM_MESSAGING_SENDER_ID=your-sender-id

# ═══════════════════════════════════════════════════════════════════════════════
# 🐍 PYTHON RAG SERVICE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

FASTAPI_ENV=development
RAG_SERVER_HOST=0.0.0.0
RAG_SERVER_PORT=8001
RAG_DEBUG=true

# RAG Model Configuration
RAG_EMBEDDINGS_MODEL=all-MiniLM-L6-v2
RAG_EMBEDDINGS_DEVICE=cpu
RAG_BM25_WEIGHT=0.5
RAG_SEMANTIC_WEIGHT=0.5
RAG_TOP_K_RESULTS=5
RAG_SIMILARITY_THRESHOLD=0.3

# Data Paths
QURAN_DATA_PATH=./data/quran_kemenag_id.jsonl
EMBEDDINGS_PATH=./data/emb_quran.npy
FAISS_INDEX_PATH=./data/faiss_quran.index
META_DATA_PATH=./data/meta_quran.json
STOPWORDS_PATH=./data/id.indonesian.txt

# Gemini API for RAG
RAG_GEMINI_API_KEY=YOUR_GEMINI_API_KEY
RAG_GEMINI_MODEL=gemini-2.0-flash

# CORS
RAG_CORS_ORIGINS=http://localhost:8000,http://localhost:3001,http://localhost:8081

# Logging
RAG_LOG_LEVEL=INFO
RAG_LOG_FILE=./logs/rag_service.log

# ═══════════════════════════════════════════════════════════════════════════════
# 🔄 BACKGROUND JOBS & TASKS
# ═══════════════════════════════════════════════════════════════════════════════

JOB_QUEUE_ENABLED=true
JOB_WORKER_COUNT=4
JOB_TIMEOUT=3600

# Task Scheduler
SCHEDULER_ENABLED=true
CLEANUP_INTERVAL=3600
STATS_UPDATE_INTERVAL=1800

# ═══════════════════════════════════════════════════════════════════════════════
# 🔐 SECURITY & ENCRYPTION
# ═══════════════════════════════════════════════════════════════════════════════

ENCRYPTION_KEY=your-encryption-key-min-32-chars-for-aes256
HASH_ALGORITHM=bcrypt
HASH_ROUNDS=12

# CORS Preflight
PREFLIGHT_CACHE_DURATION=3600

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# ═══════════════════════════════════════════════════════════════════════════════
# 🧪 TESTING CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

TEST_DATABASE_URL=postgresql://etmin:etmin@localhost:5432/sobi-test-db
TEST_ENABLE=true
GENERATE_TEST_DATA=false

# ═══════════════════════════════════════════════════════════════════════════════
# 📊 ANALYTICS & MONITORING (Optional)
# ═══════════════════════════════════════════════════════════════════════════════

ANALYTICS_ENABLED=false
SENTRY_DSN=
DATADOG_API_KEY=
DATADOG_APP_KEY=

# ═══════════════════════════════════════════════════════════════════════════════
# 📱 MOBILE APP SPECIFIC CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# Android Configuration
ANDROID_APP_ID=com.sobi.app
ANDROID_VERSION_CODE=1
ANDROID_VERSION_NAME=1.0.0

# iOS Configuration
IOS_BUNDLE_ID=com.sobi.app
IOS_VERSION=1.0.0
IOS_BUILD=1

# ═══════════════════════════════════════════════════════════════════════════════
# ⚙️  ADVANCED CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Application is under maintenance

# Feature Flags
FEATURE_CHAT_ENABLED=true
FEATURE_EDUCATION_ENABLED=true
FEATURE_GOALS_ENABLED=true
FEATURE_TRANSACTIONS_ENABLED=true
FEATURE_EXPERT_CONSULTATION=true

# API Versioning
API_VERSION=v1
API_DEPRECATED_VERSIONS=v0

# ═══════════════════════════════════════════════════════════════════════════════
# 🚀 DEPLOYMENT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

# Docker Configuration
DOCKER_REGISTRY=docker.io
DOCKER_IMAGE_TAG=latest

# Kubernetes Configuration
KUBE_NAMESPACE=sobi
KUBE_REPLICAS=3

# Cloud Configuration
CLOUD_PROVIDER=custom
CLOUD_REGION=asia-southeast-1

# ═══════════════════════════════════════════════════════════════════════════════
# 📝 NOTES
# ═══════════════════════════════════════════════════════════════════════════════

# 1. Change all placeholder values before deploying to production
# 2. Use strong, unique values for all secrets
# 3. Store sensitive values in a secure vault (not in git)
# 4. Rotate secrets regularly
# 5. Never share .env file
# 6. Use different .env files for different environments
# 7. Test all configuration changes before deploying
# 8. Monitor logs for configuration issues

# ═══════════════════════════════════════════════════════════════════════════════
# 🔗 ENVIRONMENT TEMPLATES
# ═══════════════════════════════════════════════════════════════════════════════

# For Development: Copy values from above (mostly defaults)
# For Staging: Update URLs to staging domain, real payment keys
# For Production: Use secure vault, strong secrets, production URLs

# Example for different environments:
# 1. .env.development (local testing)
# 2. .env.staging (staging server)
# 3. .env.production (production server)
